<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wisata & Kuliner Palangkaraya</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #ffffff;
            color: #333;
        }

        /* Halaman 1 - Landing Page */
        .landing-page {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background: linear-gradient(135deg, #2d5016 0%, #4a7c2c 100%);
        }

        .landing-header {
            text-align: center;
            padding: 60px 20px 40px;
            color: white;
        }

        .landing-header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .landing-header p {
            font-size: 1.3em;
            opacity: 0.95;
        }

        .landing-content {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .landing-buttons {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .landing-btn {
            padding: 20px 50px;
            font-size: 1.3em;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }

        .btn-login {
            background-color: #ff8c42;
            color: white;
        }

        .btn-login:hover {
            background-color: #ff7425;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255,140,66,0.4);
        }

        .btn-guest {
            background-color: #ffd93d;
            color: #333;
        }

        .btn-guest:hover {
            background-color: #ffc61a;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255,217,61,0.4);
        }

        /* Halaman 2 - Login */
        .login-page {
            display: none;
            min-height: 100vh;
            background: linear-gradient(135deg, #2d5016 0%, #4a7c2c 100%);
            padding: 20px;
        }

        .login-container {
            max-width: 450px;
            margin: 50px auto;
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        .login-header {
            text-align: center;
            margin-bottom: 30px;
            color: #2d5016;
        }

        .login-header h2 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: #2d5016;
        }

        .submit-btn {
            width: 100%;
            padding: 14px;
            background-color: #2d5016;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-top: 10px;
        }

        .submit-btn:hover {
            background-color: #1f3810;
        }

        .form-toggle {
            text-align: center;
            margin-top: 20px;
            color: #666;
        }

        .form-toggle a {
            color: #ff8c42;
            text-decoration: none;
            font-weight: 600;
        }

        .form-toggle a:hover {
            text-decoration: underline;
        }

        .back-btn {
            display: inline-block;
            margin-bottom: 20px;
            padding: 10px 20px;
            background-color: #ff8c42;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            transition: background-color 0.3s;
        }

        .back-btn:hover {
            background-color: #ff7425;
        }

        /* Halaman 3 - Dashboard */
        .dashboard {
            display: none;
            min-height: 100vh;
            background-color: #f5f5f5;
        }

        .navbar {
            background: linear-gradient(135deg, #2d5016 0%, #4a7c2c 100%);
            color: white;
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .navbar h1 {
            font-size: 1.8em;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logout-btn {
            padding: 10px 25px;
            background-color: #ff8c42;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s;
        }

        .logout-btn:hover {
            background-color: #ff7425;
        }

        .dashboard-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .search-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 40px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .search-section h2 {
            color: #2d5016;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .filter-container {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 12px 30px;
            border: 2px solid #2d5016;
            background: white;
            color: #2d5016;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .filter-btn:hover, .filter-btn.active {
            background: #2d5016;
            color: white;
        }

        .section-title {
            font-size: 2.2em;
            color: #2d5016;
            margin: 40px 0 25px;
            padding-bottom: 10px;
            border-bottom: 4px solid #ffd93d;
        }

        .cards-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
        }

        .card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }

        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }

        .card-image {
            width: 100%;
            height: 250px;
            object-fit: cover;
        }

        .card-content {
            padding: 25px;
        }

        .card-title {
            font-size: 1.6em;
            color: #2d5016;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .card-info {
            margin: 10px 0;
            color: #555;
            line-height: 1.6;
        }

        .card-info strong {
            color: #ff8c42;
            font-weight: 600;
        }

        .favorite-btn {
            margin-top: 15px;
            padding: 10px 25px;
            background-color: #ffd93d;
            color: #333;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .favorite-btn:hover {
            background-color: #ffc61a;
        }

        .favorite-btn.active {
            background-color: #ff8c42;
            color: white;
        }

        .hidden {
            display: none !important;
        }

        @media (max-width: 768px) {
            .landing-header h1 {
                font-size: 2em;
            }

            .landing-buttons {
                flex-direction: column;
                gap: 20px;
            }

            .navbar {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }

            .cards-container {
                grid-template-columns: 1fr;
            }
        }

        /* Modal Floating Style (Style 2 - Mengambang di Tengah) */
        .modal {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0,0,0,0.6);
          display: none; /* show via JS */
          justify-content: center;
          align-items: center; /* MEMBUATNYA MENGAMBANG DI TENGAH VERTIKAL */
          z-index: 9999;
        }
        .modal.show {
          display: flex;
        }
        .modal-content {
          width: 100%;
          max-width: 600px;
          max-height: 90%;
          background: white;
          border-radius: 20px; /* Radius penuh untuk modal mengambang */
          padding: 20px; 
          margin: 20px; /* JARAK AMAN DARI SEMUA TEPI LAYAR */
          overflow-y: auto;
          animation: fadeIn 0.35s ease-out; /* Animasi fade-in */
        }
        @keyframes slideUp {
          from { transform: translateY(100%); }
          to { transform: translateY(0); }
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .modal-top {
          display:flex;
          justify-content:space-between;
          align-items:center;
          gap:10px;
        }
        .close {
          font-size: 28px;
          cursor: pointer;
          background: transparent;
          border: none;
        }
        .modal-image {
          width: 100%;
          height: 320px;
          object-fit: cover;
          border-radius: 12px;
          margin: 12px 0;
        }
        .detail-btn {
          margin-top: 10px;
          padding: 10px 20px;
          background: #2d5016;
          color: white;
          border: none;
          border-radius: 8px;
          cursor: pointer;
          font-weight: 600;
        }
        .detail-btn:hover { background:#1f3810; }

        .modal .meta {
          color: #555;
          margin: 6px 0;
        }
        .modal .meta strong { color:#ff8c42; }

    </style>
</head>
<body>
    <div id="landingPage" class="landing-page">
        <div class="landing-header">
            <h1>üå¥ Wisata & Kuliner Palangkaraya üçΩÔ∏è</h1>
            <p>Jelajahi Keindahan dan Kelezatan Kota Palangkaraya</p>
        </div>
        <div class="landing-content">
            <div class="landing-buttons">
                <button class="landing-btn btn-login" onclick="showLogin()">Login</button>
                <button class="landing-btn btn-guest" onclick="loginAsGuest()">Masuk Sebagai Guest</button>
            </div>
        </div>
    </div>

    <div id="loginPage" class="login-page">
        <div class="login-container">
            <a href="#" class="back-btn" onclick="showLanding()">‚Üê Kembali</a>
            
            <div id="loginForm">
                <div class="login-header">
                    <h2>Login</h2>
                    <p>Selamat datang kembali!</p>
                </div>
                <form onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="loginEmail" required placeholder="nama@email.com">
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="loginPassword" required placeholder="Masukkan password">
                    </div>
                    <button type="submit" class="submit-btn">Login</button>
                </form>
                <div class="form-toggle">
                    Belum punya akun? <a href="#" onclick="showRegister()">Daftar di sini</a>
                </div>
            </div>

            <div id="registerForm" class="hidden">
                <div class="login-header">
                    <h2>Registrasi</h2>
                    <p>Buat akun baru</p>
                </div>
                <form onsubmit="handleRegister(event)">
                    <div class="form-group">
                        <label>Nama Lengkap</label>
                        <input type="text" id="registerName" required placeholder="Nama lengkap Anda">
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="registerEmail" required placeholder="nama@email.com">
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="registerPassword" required placeholder="Minimal 6 karakter">
                    </div>
                    <button type="submit" class="submit-btn">Daftar</button>
                </form>
                <div class="form-toggle">
                    Sudah punya akun? <a href="#" onclick="showLoginForm()">Login di sini</a>
                </div>
            </div>
        </div>
    </div>

    <div id="dashboard" class="dashboard">
        <nav class="navbar">
            <h1>üå¥ Palangkaraya Explorer</h1>
            <div class="user-info">
                <span id="userName">Guest</span>
                <button class="logout-btn" onclick="handleLogout()">Logout</button>
            </div>
        </nav>

        <div class="dashboard-content">
            <div class="search-section">
                <h2>üîç Cari Favorit Anda</h2>
                <div class="filter-container">
                    <button class="filter-btn active" onclick="filterContent(event, 'all')">Semua</button>
                    <button class="filter-btn" onclick="filterContent(event, 'wisata')">Wisata Favorit</button>
                    <button class="filter-btn" onclick="filterContent(event, 'kuliner')">Kuliner Favorit</button>
                </div>
            </div>

            <div id="wisataSection">
                <h2 class="section-title">üèûÔ∏è Tempat Wisata</h2>
                <div class="cards-container" id="wisataCards"></div>
            </div>

            <div id="kulinerSection">
                <h2 class="section-title">üç¥ Kuliner Khas</h2>
                <div class="cards-container" id="kulinerCards"></div>
            </div>
        </div>
    </div>

    <div id="detailModal" class="modal" aria-hidden="true">
      <div class="modal-content" role="dialog" aria-modal="true">
        <div class="modal-top">
          <h2 id="modalNama" style="color:#2d5016; margin:0; font-size:1.6em;"></h2>
          <button id="closeModal" class="close" aria-label="Tutup">&times;</button>
        </div>
        <img id="modalImage" class="modal-image" src="" alt="Gambar Wisata">
        <div style="padding-bottom:10px;">
            <h3 style="color:#2d5016; margin:8px 0;">Latar Belakang & Filosofi</h3>
            <div id="modalLatar" style="color:#444; line-height:1.6; text-align:justify;"></div>
            <hr style="margin:12px 0;">
            <div style="display:flex; gap:10px; margin-top:18px;">
                <button onclick="closeDetail()" class="detail-btn">Tutup</button>
            </div>
        </div>
      </div>
    </div>

    <script>
        // Data Storage
        let users = JSON.parse(localStorage.getItem('users')) || [];
        let currentUser = null;
        let favorites = JSON.parse(localStorage.getItem('favorites')) || { wisata: [], kuliner: [] };

        // Data Wisata dengan latarBelakang
        const wisataData = [
            {
                id: 1,
                nama: "Huma Betang",
                image: "aset/gambar/Rumah_Betang.jpg",
                lokasi: "Jl. Tjilik Riwut Km. 4, Palangkaraya",
                hargaTiket: "Rp 10.000 - Rp 15.000",
                jamOperasional: "08.00 - 17.00 WIB",
                fasilitas: "Parkir luas, toilet, gazebo, area foto, pemandu wisata",
                latarBelakang: `
                <ul style="padding-left:20px; line-height:1.6;">
                Huma Betang adalah rumah tradisional masyarakat Dayak Kalimantan yang dipakai sebagai tempat tinggal bersama beberapa keluarga besar. Bentuknya memanjang dan berdiri di atas tiang kayu tinggi, berfungsi mengantisipasi banjir dan menjaga ventilasi. Selain nilai historis, Huma Betang juga sering menjadi pusat kegiatan budaya dan upacara adat.
                    <li><strong>Nilai Filosofis:</strong> Betang mencerminkan filosofi \"Huma Betang\" yang menjunjung tinggi kebersamaan (komunalisme), kerukunan, kesetaraan, dan toleransi di antara para penghuninya, terlepas dari perbedaan agama dan suku.</li>
                    <li><strong>Fungsi Sosial:</strong> Secara tradisional dihuni banyak keluarga (bahkan puluhan atau ratusan KK), menjadi pusat aktivitas sosial, upacara adat, musyawarah, dan pendidikan keterampilan.</li>
                    <li><strong>Sejarah:</strong> Dahulu juga berfungsi sebagai tempat perlindungan komunal dari ancaman atau konflik.</li>
                    <li><strong>Struktur Bangunan:</strong> Rumah panggung memanjang yang dibangun dari kayu ulin (kayu besi) agar kuat dan tahan cuaca.</li>
                </ul>
                `
            },
            {
                id: 2,
                nama: "Museum Balanga",
                image: "aset/gambar/museum_balanga.jpg",
                lokasi: "Jl. Tjilik Riwut Km. 2.5, Palangkaraya",
                hargaTiket: "Rp 5.000 - Rp 10.000",
                jamOperasional: "08.00 - 16.00 WIB (Tutup Senin)",
                fasilitas: "Ruang pameran, perpustakaan, taman, parkir, toilet, AC",
                latarBelakang: `
                <ul style="padding-left:20px; line-height:1.6;">
                Museum Balanga merupakan pusat pelestarian budaya serta sejarah Kalimantan Tengah berdiri sejak tahun 1973 (ditetapkan sebagai museum provinsi pada 1990) dan memiliki peran penting sebagai media edukasi. Di dalamnya tersimpan koleksi etnografi, artefak, pakaian tradisional, dan benda-benda sejarah yang menceritakan kehidupan masyarakat lokal dari masa ke masa. Museum ini sering digunakan untuk pendidikan dan penelitian.
                    <li><strong>Nama:</strong> Nama "Balanga" diambil dari salah satu koleksi utamanya, yaitu Balanga (Balanai), semacam guci atau benda keramik tua yang bernilai historis dan spiritual tinggi bagi masyarakat Dayak.</li>
                    <li><strong>Koleksi:</strong> Koleksi museum disusun berdasarkan daur hidup manusia Suku Dayak, mulai dari peralatan upacara fase kelahiran, perkawinan, hingga kematian.</li>
                    <li><strong>Benda Budaya:</strong> Di dalamnya tersimpan berbagai benda bersejarah dan bernilai kearifan lokal seperti senjata tradisional (Mandau, Sumpit), alat musik tradisional, pakaian adat, arca/patung (Sapundu), dan miniatur Rumah Betang.</li>
                    <li><strong>Gedung:</strong> Gedung museum sendiri merupakan bekas Gedung Monumen Dewan Nasional, menambah nilai historis bangunan tersebut.</li>
                </ul>
                `
            },
            {
                id: 3,
                nama: "Bukit Cinta",
                image: "aset/gambar/bukitcinta.webp",
                lokasi: "Tangkiling, Bukit Batu, Palangkaraya",
                hargaTiket: "Rp 5.000 - Rp 20.000",
                jamOperasional: "06.00 - 17.30 WIB",
                fasilitas: "Balon udara, viewing deck, restoran, toilet, parkir luas, spot foto",
                latarBelakang: `
                <ul style="padding-left:20px; line-height:1.6;">
                Bukit Tangkiling adalah kawasan wisata alam dan budaya yang berada di Kecamatan Bukit Batu, Palangka Raya. Area ini merupakan mozaik perbukitan dengan pemandangan alam tropis dan sarat dengan nilai spiritual serta legenda lokal.
                    <li><strong>Kawasan:</strong> Bukit Tangkiling adalah bagian dari Taman Wisata Alam (TWA) yang mencakup beberapa puncak bukit lainnya (seperti Bukit Baranahu, Bukit Buhis, dll.).</li>
                    <li><strong>Legenda:</strong> Tempat ini sangat erat kaitannya dengan cerita rakyat Dayak. Salah satu yang paling terkenal adalah legenda Batu Banama, yaitu sebuah batu besar yang dipercaya sebagai bekas perahu yang dikutuk menjadi batu karena suatu pelanggaran. Kisah ini mengingatkan tentang relasi manusia dengan alam dan sungai.</li>
                    <li><strong>Fungsi Spiritual:</strong> Perbukitan Tangkiling telah lama dikenal sebagai ruang retret spiritual bagi warga setempat. Di beberapa titik, Anda akan menemukan situs adat seperti Sandung (tempat menyimpan tulang belulang), Sapundu, dan Balai Basarah yang mencerminkan tradisi Dayak Kaharingan.</li>
                    <li><strong>Daya Tarik:</strong> Selain legenda dan spiritualitas, bukit ini menawarkan panorama hutan kerangas, bongkahan granit, dan udara sejuk, menjadikannya tempat ideal untuk tracking dan menikmati alam.</li>
                </ul>
                `
            }
        ];

        // Data Kuliner dengan latarBelakang BARU
        const kulinerData = [
            {
                id: 1,
                nama: "Juhu Singkah",
                image: "aset/gambar/Juhusingkah.jpg",
                sejarah: "Makanan tradisional Dayak yang diolah dari umbut rotan muda dengan kuah santan dan bumbu khas Kalimantan",
                bahanMakanan: "Umbut rotan, santan kelapa, cabai, bawang, ikan/daging, asam kandis",
                kisaranHarga: "Rp 25.000 - Rp 40.000",
                latarBelakang: `
                <p><strong>Juhu Singkah</strong> (Lauk Umbut Rotan) adalah makanan ikonik Suku Dayak yang menggunakan umbut rotan muda sebagai bahan utama. Masakan ini memiliki rasa pahit unik dari rotan yang sudah diolah, dikombinasikan dengan kuah santan dan bumbu rempah khas Kalimantan.</p>
                <p>Secara budaya, hidangan ini sering disajikan pada acara-acara adat penting atau sebagai bentuk penghormatan. Penggunaannya mencerminkan kearifan lokal dalam memanfaatkan hasil hutan secara lestari.</p>
                `
            },
            {
                id: 2,
                nama: "Patin Bakar Sungai",
                image: "aset/gambar/patinbakar.png",
                sejarah: "Ikan patin dari Sungai Kahayan yang dibakar dengan bumbu khas, menjadi ikon kuliner Palangkaraya sejak dulu",
                bahanMakanan: "Ikan patin segar, kecap manis, bawang putih, jahe, kemiri, cabai, gula merah",
                kisaranHarga: "Rp 35.000 - Rp 60.000",
                latarBelakang: `
                <p>Kota Palangkaraya yang dialiri oleh sungai-sungai besar seperti Sungai Kahayan, menjadikan Ikan Patin segar melimpah. Patin Bakar Sungai adalah hidangan andalan yang melambangkan kekayaan sumber daya perairan di Kalimantan Tengah.</p>
                <p>Ikan dibakar dengan bumbu rempah yang kuat dan sering disajikan dengan sambal pencit (mangga muda). Kuliner ini adalah representasi dari tradisi memancing dan menu wajib bagi siapa pun yang ingin mencicipi rasa otentik dari sungai Kahayan.</p>
                `
            },
            {
                id: 3,
                nama: "Kalumpe",
                image: "aset/gambar/Kalumpe.jpg",
                sejarah: "Sayur berkuah santan khas Dayak dengan daun pakis dan kacang panjang, makanan keseharian masyarakat Dayak",
                bahanMakanan: "Daun pakis, kacang panjang, santan, cabai, bawang, terasi, ikan teri",
                kisaranHarga: "Rp 15.000 - Rp 30.000",
                latarBelakang: `
                <p><strong>Kalumpe</strong> (atau Karupei) adalah sayur daun singkong yang populer di kalangan Suku Dayak. Keunikan Kalumpe terletak pada cara pengolahannya: daun singkong tidak hanya direbus, tetapi ditumbuk hingga sangat halus (seperti bubur kental).</p>
                <p>Proses ini menghasilkan tekstur yang sangat lembut dan berbeda dari sayur daun singkong biasa. Kalumpe adalah makanan yang mencerminkan kesederhanaan dan kedekatan masyarakat Dayak dengan hasil kebun rumah tangga mereka.</p>
                `
            }
        ];

        // Page Navigation
        function showLanding() {
            document.getElementById('landingPage').style.display = 'flex';
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('dashboard').style.display = 'none';
        }

        function showLogin() {
            document.getElementById('landingPage').style.display = 'none';
            document.getElementById('loginPage').style.display = 'block';
            document.getElementById('dashboard').style.display = 'none';
        }

        function showDashboard() {
            document.getElementById('landingPage').style.display = 'none';
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('dashboard').style.display = 'block';
            renderCards();
        }

        function showRegister() {
            document.getElementById('loginForm').classList.add('hidden');
            document.getElementById('registerForm').classList.remove('hidden');
        }

        function showLoginForm() {
            document.getElementById('registerForm').classList.add('hidden');
            document.getElementById('loginForm').classList.remove('hidden');
        }

        // Authentication
        function handleRegister(e) {
            e.preventDefault();
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;

            if (users.find(u => u.email === email)) {
                alert('Email sudah terdaftar!');
                return;
            }

            users.push({ name, email, password });
            localStorage.setItem('users', JSON.stringify(users));
            alert('Registrasi berhasil! Silakan login.');
            showLoginForm();
            document.getElementById('registerForm').querySelector('form').reset();
        }

        function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            const user = users.find(u => u.email === email && u.password === password);
            if (user) {
                currentUser = user;
                document.getElementById('userName').textContent = user.name;
                showDashboard();
            } else {
                alert('Email atau password salah!');
            }
        }

        function loginAsGuest() {
            currentUser = { name: 'Guest', email: 'guest@local' };
            document.getElementById('userName').textContent = 'Guest';
            showDashboard();
        }

        function handleLogout() {
            currentUser = null;
            favorites = { wisata: [], kuliner: [] };
            showLanding();
        }

        // Render Cards
        function renderCards() {
            const wisataContainer = document.getElementById('wisataCards');
            const kulinerContainer = document.getElementById('kulinerCards');

            wisataContainer.innerHTML = wisataData.map(item => `
                <div class="card wisata-card" data-id="${item.id}">
                    <img src="${item.image}" alt="${item.nama}" class="card-image">
                    <div class="card-content">
                        <h3 class="card-title">${item.nama}</h3>
                        <p class="card-info"><strong>üìç Lokasi:</strong> ${item.lokasi}</p>
                        <p class="card-info"><strong>üé´ Harga Tiket:</strong> ${item.hargaTiket}</p>
                        <p class="card-info"><strong>‚è∞ Jam Operasional:</strong> ${item.jamOperasional}</p>
                        <p class="card-info"><strong>‚ú® Fasilitas:</strong> ${item.fasilitas}</p>
                        <div style="display:flex; gap:10px; margin-top:12px; align-items:center;">
                            <button class="favorite-btn ${favorites.wisata.includes(item.id) ? 'active' : ''}" onclick="toggleFavorite('wisata', ${item.id})">
                                ${favorites.wisata.includes(item.id) ? '‚≠ê Favorit' : '‚òÜ Tambah Favorit'}
                            </button>
                            <button class="detail-btn" onclick="showDetail('wisata', ${item.id})">Detail</button>
                        </div>
                    </div>
                </div>
            `).join('');

            kulinerContainer.innerHTML = kulinerData.map(item => `
                <div class="card kuliner-card" data-id="${item.id}">
                    <img src="${item.image}" alt="${item.nama}" class="card-image">
                    <div class="card-content">
                        <h3 class="card-title">${item.nama}</h3>
                        <p class="card-info"><strong>üìú Sejarah:</strong> ${item.sejarah}</p>
                        <p class="card-info"><strong>ü•ò Bahan:</strong> ${item.bahanMakanan}</p>
                        <p class="card-info"><strong>üí∞ Kisaran Harga:</strong> ${item.kisaranHarga}</p>
                        <div style="display:flex; gap:10px; margin-top:12px; align-items:center;">
                            <button class="favorite-btn ${favorites.kuliner.includes(item.id) ? 'active' : ''}" onclick="toggleFavorite('kuliner', ${item.id})">
                                ${favorites.kuliner.includes(item.id) ? '‚≠ê Favorit' : '‚òÜ Tambah Favorit'}
                            </button>
                            <button class="detail-btn" onclick="showDetail('kuliner', ${item.id})">Detail</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Filter Content (now accepts event to set active button)
        function filterContent(e, type) {
            const wisataSection = document.getElementById('wisataSection');
            const kulinerSection = document.getElementById('kulinerSection');
            const wisataCards = document.querySelectorAll('.wisata-card');
            const kulinerCards = document.querySelectorAll('.kuliner-card');
            
            // Update active button
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            if (e && e.currentTarget) e.currentTarget.classList.add('active');
            else if (e && e.target) e.target.classList.add('active');

            if (type === 'all') {
                wisataSection.style.display = 'block';
                kulinerSection.style.display = 'block';
                wisataCards.forEach(card => card.style.display = 'block');
                kulinerCards.forEach(card => card.style.display = 'block');
            } else if (type === 'wisata') {
                wisataSection.style.display = 'block';
                kulinerSection.style.display = 'none';
                wisataCards.forEach(card => {
                    const id = parseInt(card.dataset.id);
                    card.style.display = favorites.wisata.includes(id) ? 'block' : 'none';
                });
            } else if (type === 'kuliner') {
                wisataSection.style.display = 'none';
                kulinerSection.style.display = 'block';
                kulinerCards.forEach(card => {
                    const id = parseInt(card.dataset.id);
                    card.style.display = favorites.kuliner.includes(id) ? 'block' : 'none';
                });
            }
        }

        // Toggle Favorite
        function toggleFavorite(type, id) {
            if (favorites[type].includes(id)) {
                favorites[type] = favorites[type].filter(fId => fId !== id);
            } else {
                favorites[type].push(id);
            }
            localStorage.setItem('favorites', JSON.stringify(favorites));
            renderCards();
        }

        // Modal: showDetail and closeDetail (MODIFIED TO HANDLE TYPE)
        function showDetail(type, id) {
            let item;
            let title;
            
            if (type === 'wisata') {
                item = wisataData.find(w => w.id === id);
                title = "Latar Belakang & Filosofi";
            } else if (type === 'kuliner') {
                item = kulinerData.find(k => k.id === id);
                title = "Filosofi & Asal-Usul Kuliner"; // Judul berbeda untuk kuliner
            }
            
            if (!item) return;

            const modal = document.getElementById('detailModal');
            document.getElementById('modalNama').textContent = item.nama;
            const modalImg = document.getElementById('modalImage');
            modalImg.src = item.image;
            modalImg.alt = item.nama;
            
            // Perbarui H3 di modal sesuai jenis konten
            document.querySelector('.modal-content h3').textContent = title;

            document.getElementById('modalLatar').innerHTML = item.latarBelakang || 'Belum ada deskripsi latar belakang.';

            modal.classList.add('show');
            modal.setAttribute('aria-hidden', 'false');
            // prevent body scroll while modal open
            document.body.style.overflow = 'hidden';
        }

        function closeDetail() {
            const modal = document.getElementById('detailModal');
            modal.classList.remove('show');
            modal.setAttribute('aria-hidden', 'true');
            document.body.style.overflow = '';
        }

        // Close modal when clicking overlay (di luar modal-content)
        document.addEventListener('click', function(e){
            const modal = document.getElementById('detailModal');
            if (!modal) return;
            if (modal.classList.contains('show')) {
                const content = modal.querySelector('.modal-content');
                if (content && !content.contains(e.target) && e.target === modal) {
                    closeDetail();
                }
            }
        });

        // Close modal via close button
        document.getElementById('closeModal').addEventListener('click', closeDetail);

        // Keyboard: close modal on ESC
        document.addEventListener('keydown', function(e){
            if (e.key === 'Escape') {
                const modal = document.getElementById('detailModal');
                if (modal && modal.classList.contains('show')) closeDetail();
            }
        });

        // Initialize
        window.onload = function() {
            showLanding();
            // try to restore favorites from localStorage
            const fs = JSON.parse(localStorage.getItem('favorites'));
            if (fs) favorites = fs;
        };
    </script>
</body>
</html>